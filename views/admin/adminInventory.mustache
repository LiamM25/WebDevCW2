{{> header }}
{{> admin/adminNav}}

<h1>Inventory</h1>
<!-- Button to reset filters -->
<button onclick="resetFilters()">Reset Filters</button>

<!-- Filter controls -->
<div>
  <label for="pantryLocationFilter">Pantry Location:</label>
  <select id="pantryLocationFilter" onchange="filterInventory()">
    <option value="">All</option>
    <option value="Pantry1">Pantry 1</option>
    <option value="Pantry2">Pantry 2</option>
    
  </select>
</div>

<div>
  <label for="itemTypeFilter">Item Type:</label>
  <select id="itemTypeFilter" onchange="filterInventory()">
    <option value="">All</option>
    <option value="Fruit/Veg">Fruit/Veg</option>
    <option value="Canned Goods">Canned Goods</option>
    <option value="Meat/Poultry">Meat/Poultry</option>
    <option value="Fish">Fish</option>
    <option value="Grains">Grains</option>
    <option value="Milk Products">Milk Products</option>
    <option value="Other">Other</option>
    </select>
</div>

<div>
  <label for="confirmedOrderFilter">Confirmed Inventory:</label>
  <select id="confirmedOrderFilter" onchange="filterInventory()">
    <option value="">All</option>
    <option value="Yes">Yes</option>
    <option value="No">No</option>
    
  </select>
</div>



<table>
  <thead>
    <tr>
      <th>Pantry Location</th>
      <th>Item Type</th>
      <th>Item Name</th>
      <th>Item Quantity</th>
      <th>Weight</th>
      <th>Expiration Date</th>
      <th>Harvest Date</th>
      <th>Confirmed</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#inventory}}
    <tr>
      <td>{{pantryLocation}}</td>
      <td>{{itemType}}</td>
      <td>{{itemName}}</td>
      <td>{{itemQuantity}}</td>
      <td>{{Weight}}</td>
      <td>{{ExpirationDate}}</td>
      <td>{{HarvestDate}}</td>
      <td>{{confirmed}}</td>
      <td>
        <form action="/admin/deleteInvItem" method="POST">
            <input type="hidden" name="itemId" value="{{_id}}">
            <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {{/inventory}}
  </tbody>
</table>

<script>
  // JavaScript function to filter inventory
  function filterInventory() {
    // Get selected filter options
    const pantryLocation = document.getElementById("pantryLocationFilter").value;
    const itemType = document.getElementById("itemTypeFilter").value;
    const confirmed = document.getElementById("confirmedOrderFilter").value;
    // Get other filter options similarly for other columns

    // Construct URL with filter options
    const queryParams = new URLSearchParams();
    if (pantryLocation) {
      queryParams.append('pantryLocation', pantryLocation);
    }
    if (itemType) {
      queryParams.append('itemType', itemType);
    }
    if (confirmed) {
      queryParams.append('confirmed', confirmed);
    }
    
    

    const url = '/admin/adminInventory?' + queryParams.toString();

    // Redirect to filtered inventory page
    window.location.href = url;


    // JavaScript function to reset filters
    function resetFilters() {
    // Reset all filter controls to default values
    document.getElementById("pantryLocationFilter").value = "";
    document.getElementById("itemTypeFilter").value = "";
    document.getElementById("confirmedOrderFilter").value = "";

    // Redirect to display full database
    location.reload();
  }


  }
</script>